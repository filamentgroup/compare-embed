<!DOCTYPE html>
<html lang="en">
<head>
  
  <title>Inline an SVG file in HTML, declaratively & asynchronously!</title>
  <style>
    body {font-family: sans-serif; margin: 50px 10vw; max-width: 60em;}
    pre { border: 1px solid #aaa; background: #eee; padding: 1em; line-height: 1.4; white-space: pre-wrap; word-wrap: break-word;}
    iframe { border: 0; }
  </style>
</head>
<body>
  <h1>Test page for <a href="https://www.filamentgroup.com/lab/html-includes/">HTML Includes that Work Today</a></h1>
  <p>An experiment by <a href="https://scottjehl.com">Scott Jehl</a> of <a href="https://www.filamentgroup.com">Filament Group</a></p>
  
  <p>Ajax Test</p>
   
  <div>
    <svg class="icon">
      <use xlink:href="signal.svg?1" /> 
    </svg>
  </div>
  <div>
    <svg class="icon">
      <use xlink:href="signal.svg?2" /> 
    </svg>
  </div>
  <div>
    <svg class="icon">
      <use xlink:href="signal.svg?3" /> 
    </svg>
  </div>
  <div>
    <svg class="icon">
      <use xlink:href="signal.svg?4" /> 
    </svg>
  </div>
  <div>
    <svg class="icon">
      <use xlink:href="signal.svg?5" /> 
    </svg>
  </div>
  <div>
    <svg class="icon">
      <use xlink:href="signal.svg?6" /> 
    </svg>
  </div>
  
  <script>
  const icons = document.querySelectorAll("svg.icon");

icons.forEach(icon => {
  const url = icon.querySelector("use").getAttribute("xlink:href"); // might wanna look for href also
  fetch(url)
    .then(response => response.text())
    .then(data => {
      /* This is probably a bit layout-thrashy. Someone smarter than me could probably fix that up. */

      // Replace the <svg><use></svg> with inline SVG
      const newEl = document.createElement("span");
      newEl.innerHTML = data;
      icon.parentNode.replaceChild(newEl, icon);

      // Remove the <span>s
      const parent = newEl.parentNode;
      while (newEl.firstChild) parent.insertBefore(newEl.firstChild, newEl);
      parent.removeChild(newEl);
    });
});

  </script>
</body>
</html>
